=================================================================================
PHASES 7-8: QUICK TESTING CHECKLIST
=================================================================================

S·ª≠ d·ª•ng checklist n√†y ƒë·ªÉ test t·ª´ng feature m·ªôt c√°ch c√≥ h·ªá th·ªëng.

=================================================================================
üì± CHU·∫®N B·ªä TEST
=================================================================================

Thi·∫øt b·ªã:
[ ] 2 ƒëi·ªán tho·∫°i Android (Device A v√† Device B)
[ ] C·∫£ 2 ƒë√£ c√†i ƒë·∫∑t app m·ªõi nh·∫•t
[ ] ƒêƒÉng nh·∫≠p 2 t√†i kho·∫£n kh√°c nhau
[ ] K·∫øt n·ªëi WiFi/4G ·ªïn ƒë·ªãnh

Quy·ªÅn (Permissions):
[ ] Device A: RECORD_AUDIO ƒë√£ c·∫•p
[ ] Device A: CAMERA ƒë√£ c·∫•p (cho video call)
[ ] Device A: POST_NOTIFICATIONS ƒë√£ c·∫•p
[ ] Device B: T∆∞∆°ng t·ª±
[ ] C·∫£ 2: Battery optimization t·∫Øt cho app

Firebase:
[ ] Firestore rules ƒë√£ update cho calls collection
[ ] Firebase Auth ho·∫°t ƒë·ªông
[ ] Kh√¥ng c√≥ l·ªói trong Firebase Console

=================================================================================
üéØ PHASE 7: INCOMING CALL SERVICE & NOTIFICATIONS
=================================================================================

## TEST 7.1: Background Incoming Call ‚úÖ
Steps:
1. Device B: M·ªü app, r·ªìi nh·∫•n Home (app v√†o background)
2. Device A: G·ªçi cho Device B
3. Device B: Ki·ªÉm tra notification

Expected:
[ ] Full-screen notification xu·∫•t hi·ªán
[ ] Ti√™u ƒë·ªÅ hi·ªÉn th·ªã t√™n ng∆∞·ªùi g·ªçi
[ ] N·ªôi dung: "Cu·ªôc g·ªçi tho·∫°i ƒë·∫øn..." ho·∫∑c "Cu·ªôc g·ªçi video ƒë·∫øn..."
[ ] 2 n√∫t: "T·ª´ ch·ªëi" v√† "Ch·∫•p nh·∫≠n"
[ ] ƒêi·ªán tho·∫°i rung
[ ] Nh·∫°c chu√¥ng ph√°t

---

## TEST 7.2: Lock Screen Behavior ‚úÖ
Steps:
1. Device B: Kh√≥a m√†n h√¨nh
2. Device A: G·ªçi cho Device B
3. Device B: Ki·ªÉm tra

Expected:
[ ] M√†n h√¨nh s√°ng l√™n (turnScreenOn)
[ ] Notification hi·ªán tr√™n lock screen
[ ] C√≥ th·ªÉ accept/reject m√† kh√¥ng c·∫ßn unlock
[ ] Full-screen intent ho·∫°t ƒë·ªông

---

## TEST 7.3: Accept from Notification ‚úÖ
Steps:
1. Device B: App background, incoming call notification
2. Nh·∫•n n√∫t "Ch·∫•p nh·∫≠n"

Expected:
[ ] CallActivity m·ªü ra
[ ] Notification bi·∫øn m·∫•t
[ ] Nh·∫°c chu√¥ng ng·ª´ng
[ ] Rung ng·ª´ng
[ ] WebRTC connection b·∫Øt ƒë·∫ßu
[ ] Call status: "ƒêang k·∫øt n·ªëi..."

---

## TEST 7.4: Reject from Notification ‚úÖ
Steps:
1. Device B: App background, incoming call notification
2. Nh·∫•n n√∫t "T·ª´ ch·ªëi"

Expected:
[ ] Notification bi·∫øn m·∫•t ngay l·∫≠p t·ª©c
[ ] Nh·∫°c chu√¥ng ng·ª´ng
[ ] Rung ng·ª´ng
[ ] Service cleanup
[ ] Device A th·∫•y status: "ƒê√£ t·ª´ ch·ªëi"

---

## TEST 7.5: Caller Cancels Before Answer ‚úÖ
Steps:
1. Device B: App background, incoming call notification ƒëang hi·ªán
2. Device A: End call tr∆∞·ªõc khi B tr·∫£ l·ªùi
3. Device B: Ki·ªÉm tra

Expected:
[ ] Notification t·ª± ƒë·ªông bi·∫øn m·∫•t
[ ] Nh·∫°c chu√¥ng ng·ª´ng
[ ] Rung ng·ª´ng
[ ] Kh√¥ng crash
[ ] Service t·ª± cleanup

---

## TEST 7.6: Foreground Incoming Call ‚úÖ
Steps:
1. Device B: App ƒëang m·ªü (foreground)
2. Device A: G·ªçi cho Device B

Expected:
[ ] CallActivity m·ªü tr·ª±c ti·∫øp (kh√¥ng qua notification)
[ ] Hi·ªÉn th·ªã UI incoming call
[ ] N√∫t Accept v√† Reject hi·ªÉn th·ªã
[ ] T√™n ng∆∞·ªùi g·ªçi hi·ªÉn th·ªã ƒë√∫ng

=================================================================================
üõ°Ô∏è PHASE 8: EDGE CASES & POLISH
=================================================================================

## TEST 8.1: Concurrent Call Prevention ‚úÖ
Steps:
1. Device A call Device B ‚Üí connected
2. Device C call Device A (trong khi A ƒëang g·ªçi v·ªõi B)
3. Device A: Ki·ªÉm tra notification
4. Tap "Ch·∫•p nh·∫≠n"

Expected:
[ ] Incoming call notification t·ª´ C xu·∫•t hi·ªán
[ ] Khi tap Accept ‚Üí t·ª± ƒë·ªông reject
[ ] Call v·ªõi B ti·∫øp t·ª•c b√¨nh th∆∞·ªùng
[ ] Device C th·∫•y "ƒê√£ t·ª´ ch·ªëi"
[ ] Kh√¥ng c√≥ 2 calls ƒë·ªìng th·ªùi

Alternative Test:
1. Device A ƒëang g·ªçi B
2. Device A th·ª≠ g·ªçi th√™m C

Expected:
[ ] Error message: "B·∫°n ƒëang trong cu·ªôc g·ªçi kh√°c"
[ ] Call kh√¥ng ƒë∆∞·ª£c t·∫°o
[ ] Call v·ªõi B ti·∫øp t·ª•c

---

## TEST 8.2.1: Network Disconnect ‚Üí Reconnect ‚úÖ
Steps:
1. Device A v√† B ƒëang trong call (connected)
2. Device A: T·∫Øt WiFi
3. ƒê·ª£i 5 gi√¢y
4. Device A: B·∫≠t WiFi l·∫°i

Expected:
[ ] Connection state ‚Üí "DISCONNECTED"
[ ] Disconnect timer b·∫Øt ƒë·∫ßu (10 gi√¢y)
[ ] Sau 5 gi√¢y: WiFi reconnect
[ ] Connection state ‚Üí "CONNECTED"
[ ] Timer b·ªã cancel
[ ] Call ti·∫øp t·ª•c b√¨nh th∆∞·ªùng
[ ] Kh√¥ng b·ªã end

---

## TEST 8.2.2: Network Timeout (10 seconds) ‚úÖ
Steps:
1. Device A v√† B ƒëang trong call
2. Device A: T·∫Øt c·∫£ WiFi v√† Mobile Data
3. ƒê·ª£i h∆°n 10 gi√¢y

Expected:
[ ] Connection state: "DISCONNECTED"
[ ] Timer b·∫Øt ƒë·∫ßu countdown 10 gi√¢y
[ ] Sau ƒë√∫ng 10 gi√¢y:
  [ ] Call t·ª± ƒë·ªông end
  [ ] Error message: "M·∫•t k·∫øt n·ªëi"
  [ ] CallActivity finish
  [ ] Resources cleanup
[ ] Device B c≈©ng disconnect

---

## TEST 8.3.1: Permission Denied - Voice Call ‚úÖ
Steps:
1. Uninstall app ho·∫∑c clear data
2. Reinstall
3. Login
4. Initiate voice call
5. Permission dialog xu·∫•t hi·ªán
6. Tap "Deny" cho RECORD_AUDIO

Expected:
[ ] AlertDialog xu·∫•t hi·ªán
  [ ] Title: "C·∫ßn quy·ªÅn truy c·∫≠p"
  [ ] Message: "C·∫ßn quy·ªÅn Microphone ƒë·ªÉ th·ª±c hi·ªán cu·ªôc g·ªçi tho·∫°i"
  [ ] Button "C√†i ƒë·∫∑t"
  [ ] Button "H·ªßy"
[ ] Tap "C√†i ƒë·∫∑t" ‚Üí m·ªü System Settings
[ ] Tap "H·ªßy" ‚Üí finish activity

---

## TEST 8.3.2: Permission Denied - Video Call ‚úÖ
Steps:
1. Fresh install
2. Initiate video call
3. Grant RECORD_AUDIO, deny CAMERA

Expected:
[ ] AlertDialog xu·∫•t hi·ªán
  [ ] Message: "C·∫ßn quy·ªÅn Camera v√† Microphone ƒë·ªÉ th·ª±c hi·ªán cu·ªôc g·ªçi video"
  [ ] Nh·∫•n m·∫°nh c·∫ßn C·∫¢ HAI quy·ªÅn
[ ] Button "C√†i ƒë·∫∑t" ho·∫°t ƒë·ªông
[ ] System Settings m·ªü ƒë√∫ng app permissions

---

## TEST 8.3.3: Settings Navigation ‚úÖ
Steps:
1. Trigger permission denied dialog
2. Tap "C√†i ƒë·∫∑t"
3. System Settings m·ªü
4. Grant permissions
5. Back to app

Expected:
[ ] Settings app m·ªü
[ ] ƒê√∫ng trang App Info c·ªßa app
[ ] Permissions section visible
[ ] C√≥ th·ªÉ grant permissions
[ ] Back v·ªÅ app smoothly
[ ] C√≥ th·ªÉ retry call

=================================================================================
üîÑ INTEGRATION TESTS
=================================================================================

## INT-1: Complete Voice Call Flow ‚úÖ
1. Device A call Device B (voice)
2. B accepts
3. Talk for 30 seconds
4. A ends call

Check:
[ ] Call initiates
[ ] Ringing works
[ ] Connection established
[ ] Audio bidirectional
[ ] Duration timer accurate
[ ] End call clean

---

## INT-2: Complete Video Call Flow ‚úÖ
1. Device A call Device B (video)
2. B accepts
3. Video chat for 1 minute
4. Toggle camera/mic
5. B ends call

Check:
[ ] Video streams both ways
[ ] Local/remote video renders
[ ] Camera toggle works
[ ] Mic toggle works
[ ] Switch camera works
[ ] End call clean

---

## INT-3: Multiple Sequential Calls ‚úÖ
1. A calls B ‚Üí talk ‚Üí end
2. Wait 5 seconds
3. B calls A ‚Üí talk ‚Üí end
4. Wait 5 seconds
5. A calls B again

Check:
[ ] Each call independent
[ ] No state leakage
[ ] isInCall flag resets
[ ] Clean initialization each time
[ ] No crashes

---

## INT-4: Network Switch During Call ‚úÖ
1. A and B in call on WiFi
2. A switches to 4G during call
3. Continue talking
4. A switches back to WiFi

Check:
[ ] Brief disconnection (<10s)
[ ] Auto-reconnect
[ ] Call continues
[ ] No manual intervention needed
[ ] Audio/video resumes

---

## INT-5: App Lifecycle During Call ‚úÖ
1. A and B in call
2. B presses Home (background)
3. Wait 10 seconds
4. B opens app again (foreground)

Check:
[ ] Call continues in background
[ ] Ongoing notification shows (future feature)
[ ] Audio works in background
[ ] Video pauses (future feature)
[ ] Return to CallActivity works

---

## INT-6: Incoming Call While App Killed ‚úÖ
1. Device B: Force stop app
2. Device A: Call Device B
3. Device B: Wait for notification

Check:
[ ] Service starts even when app killed
[ ] Notification appears
[ ] Ringtone plays
[ ] Can accept/reject
[ ] App launches correctly on accept

=================================================================================
üìä TEST RESULTS TRACKING
=================================================================================

Date: _______________
Tester: _______________
Devices: 
  - A: _______________ (Android ___)
  - B: _______________ (Android ___)

PHASE 7 RESULTS:
  Test 7.1: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 7.2: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 7.3: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 7.4: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 7.5: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 7.6: [ ] PASS  [ ] FAIL  Notes: _____________________

PHASE 8 RESULTS:
  Test 8.1:   [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 8.2.1: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 8.2.2: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 8.3.1: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 8.3.2: [ ] PASS  [ ] FAIL  Notes: _____________________
  Test 8.3.3: [ ] PASS  [ ] FAIL  Notes: _____________________

INTEGRATION TESTS:
  INT-1: [ ] PASS  [ ] FAIL  Notes: _____________________
  INT-2: [ ] PASS  [ ] FAIL  Notes: _____________________
  INT-3: [ ] PASS  [ ] FAIL  Notes: _____________________
  INT-4: [ ] PASS  [ ] FAIL  Notes: _____________________
  INT-5: [ ] PASS  [ ] FAIL  Notes: _____________________
  INT-6: [ ] PASS  [ ] FAIL  Notes: _____________________

OVERALL: _____% PASS RATE

CRITICAL BUGS FOUND:
1. _______________________________________________________________
2. _______________________________________________________________
3. _______________________________________________________________

MINOR ISSUES:
1. _______________________________________________________________
2. _______________________________________________________________
3. _______________________________________________________________

=================================================================================
üéâ COMPLETION
=================================================================================

Khi t·∫•t c·∫£ tests PASS:
[ ] Update Firebase rules n·∫øu c·∫ßn
[ ] Document any workarounds
[ ] Create release notes
[ ] Deploy to production
[ ] Monitor for 24-48 hours
[ ] Collect user feedback

Good luck testing! üöÄ
=================================================================================
